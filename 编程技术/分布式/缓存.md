## 缓存与数据库双写一致

### Cache Aside Pattern

旁路缓存模式：

- 读的时候先读缓存，没缓存就读数据库，然后将数据库读取的数据放入缓存，同事返回响应
- 更新的时候先更新数据库，然后在删除缓存

### 内存队列

严格要求一致性的情况下使用，将读请求和写请求进行串行化，放到一个内存队列里去。

优化的一个情况是，多个更新请求是无意义的，可以进行压缩。

问题：读请求时阻塞