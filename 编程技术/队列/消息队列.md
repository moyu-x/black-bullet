# 概念

消息队列是一种在应用程序之间传递消息的通信模式。它是一种异步通信机制，允许发送者将消息放入队列中，而不需要立即将其发送给接收者。接收者可以在合适的时间从队列中提取消息并进行处理。

# 一些作用

1. 削峰填谷
2. 异步处理
3. 解耦

# 数据防丢失

## 消息丢失的场景

1. 发送端丢失
2. 接收端丢失
3. 消息队列丢失

## 对应的解决方案

### 发送端丢失

重发

### 消息队列丢失

1. 异步刷盘
2. 高可用部署
3. 遇到消息丢失由业务重试

### 消费过程中丢失

 1. 要等到消息接收处理完成后才能更新消费进度

# 如何保证消费一次

- 生产、消费增加幂等性保证
- 唯一 id 去重
- 用锁机制规避

