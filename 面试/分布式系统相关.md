## CAP

- 一致性（Consistency） （等同于所有节点访问同一份最新的数据副本）
- 可用性（Availability）（每次请求都能获取到非错的响应——但是不保证获取的数据为最新数据）
- 分区容错性（Partition tolerance）（以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。）

三者中只能同时有两者成立

## 服务治理及手段

所谓“治理”，在汉语词典(简编版)中的解释是“整治、修整”，字面上包含了对被治理对象的问题梳理及改进优化的意思。

服务治理是IT治理的一部分，它重点关注服务生命周期的相关要素，包括服务的架构、设计、发布、发现、版本治理、线上监控、线上管控、故障定界定位、安全性等。

为什么需要：

1. 服务数量增多
2. 服务间的依赖复杂
3. 性能问题
4. 需要故障隔离和恢复
5. 配置需要动态变化

常见的手段：

1. 服务注册与发现
2. 负载均衡
3. 熔断与降级
4. 限流
5. 服务监控与警告
6. 链路追踪
7. 配置管理

一些架构模式：微服务架构，serverless，servermesh


## 接口密等

同一个接口，多次发出同一个请求，必须保证操作只执行一次或者多次执行的结果一致

实现方式：

（后续三个都需要在请求时候带有唯一的key）

- 前端拦截（类似于前端防抖）
- 使用数据库实现幂等性
	- 通过悲观锁来实现幂等性
	- 通过唯一索引来实现幂等性
	- 通过乐观锁来实现幂等性
- 使用 JVM 锁实现幂等性
- 使用分布式锁实现幂等性

## 服务间的调用

调用方式

- HTTP/RESET
- RPC
- 消息队列
- 回调

序列化方式
- 文本类型:
	- JSON
	- XML
- 二进制类型
	- PROTOCOL buffer
	- thirft
	- Avro
- 其他
	- kyro

## 负载均衡算法

- 轮询
- 随机
- 最近最少使用
- 哈希
- 一致性哈希
- ip距离最近
- 加权轮询
- 加权随机
- 最小随机数
- 最少活跃

## 分布式事务一致性

